(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){},122:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(36),o=a.n(n),l=a(9),i=a(10),c=a(13),d=a(11),u=a(14),m=a(131),p=a(133),g=a(132),v=a(8),f=a(15),h=a.n(f),w=a(17);a(46);var b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={className:a.props.className?a.props.className:"",errorMessage:""},a.changeValue=function(e){var t=a.props.className?a.props.className:"";t+=e.target.value.length>0?" has-value":"",e.target.classList.contains("invalid-value")&&e.target.classList.remove("invalid-value"),a.setState({className:t}),a.setState({errorMessage:""})},a.validateField=function(e){var t=e.target.value,s={codResposta:99,message:""};switch(a.props.field){case"email":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())||(s.codResposta=0,s.message="E-mail inv\xe1lido.");break;case"password":t.length<3&&(s.codResposta=0,s.message="Senha com no m\xednimo 3 caracteres.");break;default:s.codResposta=99,s.message=""}99!==s.codResposta?(e.target.classList.add("invalid-value"),a.setState({errorMessage:s.message})):e.target.classList.add("valid-value"),Array.from(e.target.form.elements).every(function(t){return"BUTTON"!==t.tagName&&(""===t.value||t.classList.contains("invalid-value")?(e.target.form.querySelector("button").classList.add("disabled"),!1):(e.target.form.querySelector("button").classList.remove("disabled"),!0))})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("label",null,r.a.createElement("input",{type:this.props.type,className:this.state.className,onChange:function(t){e.changeValue(t),e.props.onChange(t)},field:this.props.field,onBlur:function(t){e.props.field?e.validateField(t):e.props.onBlur&&e.props.onBlur(t),e.props.onBlur&&e.props.onBlur(t)}}),r.a.createElement("p",null,this.props.name),this.props.icon,this.state.errorMessage&&r.a.createElement("span",{className:"error-field"},this.state.errorMessage))}}]),t}(s.Component),E=(a(48),function(e){var t=e.type,a=e.className,s=e.text;return r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{type:t,className:"".concat(a||""," disabled")},r.a.createElement("span",null,s)))}),y=a(4),O=function(){return r.a.createElement("svg",{className:"wave-bottom",viewBox:"0 0 300 110",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"gradientWave",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#b06fc7",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#6a9af5",stopOpacity:1}}))),r.a.createElement("path",{fill:"url(#gradientWave)",d:"M 0 50 Q 40 10 90 40 Q 160 80 220 70 Q 270 60 300 30 L 300 150 L 0 150 L 0 50"}))},S=(a(50),a(37)),k=Object(S.create)({baseURL:"http://localhost:3000"});k.addResponseTransform(function(e){if(!e.ok)throw e});var j=k,P=(a(118),function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isVisible:a.props.isVisible},a.closeModal=function(){a.setState({isVisible:!a.props.isVisible})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({isVisible:e.isVisible})}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal ".concat(this.state.isVisible?" is-visible":"")},r.a.createElement("button",{className:"close-modal",onClick:this.closeModal},r.a.createElement(y.FaTimesCircle,null)),r.a.createElement("div",{className:"container"},this.props.children))}}]),t}(s.Component)),M=(a(122),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading ".concat(!0===this.props.isVisible?"is-visible":"")},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-rolling",style:{background:"none"}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"gradientWave",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},r.a.createElement("stop",{offset:"0%",style:{stopColor:"#b06fc7",stopOpacity:1}}),r.a.createElement("stop",{offset:"100%",style:{stopColor:"#6a9af5",stopOpacity:1}}))),r.a.createElement("circle",{cx:"50",cy:"50",fill:"none","ng-attr-stroke":"{{config.color}}","ng-attr-stroke-width":"{{config.width}}","ng-attr-r":"{{config.radius}}","ng-attr-stroke-dasharray":"{{config.dasharray}}",stroke:"url(#gradientWave)",strokeWidth:"10",r:"35",strokeDasharray:"164.93361431346415 56.97787143782138",transform:"rotate(47.6381 50 50)"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))}}]),t}(s.Component)),L=[{path:"/",name:"Login",component:function(e){function t(){var e,a;Object(l.a)(this,t);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={errorMessage:"",errorModal:"",login:{email:"",password:""},currentForm:0,modalForgotPassword:!1,modalResetPassword:!1,resetPassword:{email:"",password:"",token:""},loading:!1,register:{name:"",email:"",password:"",confirmPassword:""}},a.do_login=function(){var e=Object(w.a)(h.a.mark(function e(t){var s,r,n,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/auth/authenticate",{email:a.state.login.email,password:a.state.login.password});case 3:s=e.sent,r=s.data,n=r.user,o=r.token,console.log(n),console.log(o),a.setState({loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),a.setState({errorMessage:e.t0.data.error,loading:!1}),"Invalid password"===e.t0.data.error&&(t.target[1].classList.remove("valid-value"),t.target[1].classList.add("invalid-value"));case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),a.submitLogin=function(e){""===a.state.login.email||""===a.state.login.password?(e.target[0].classList.add("invalid-value"),e.target[1].classList.add("invalid-value"),a.setState({errorMessage:"Todos os campos s\xe3o obrigat\xf3rios"})):(e.target[0].classList.add("valid-value"),e.target[1].classList.add("valid-value"),a.setState({errorMessage:"",loading:!0}),a.do_login(e))},a.chageForm=function(e){a.setState({currentForm:e})},a.forgotPassword=function(){var e=Object(w.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.persist(),t.preventDefault(),e.prev=2,e.next=5,j.post("/auth/forgot_password",{email:a.state.resetPassword.email});case 5:a.setState({loading:!1,modalForgotPassword:!1,modalResetPassword:!0,errorModal:""}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.setState({loading:!1,errorModal:e.t0.data.error});case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a.resetPassword=function(){var e=Object(w.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,j.post("/auth/reset_password",{email:a.state.resetPassword.email,password:a.state.resetPassword.password,token:a.state.resetPassword.token});case 4:a.setState({loading:!1,modalResetPassword:!1,errorModal:"",resetPassword:{email:"",password:"",token:""}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({errorModal:e.t0.data.error});case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.do_signUp=Object(w.a)(h.a.mark(function e(){var t,s,r,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/auth/register",{name:a.state.register.name,email:a.state.register.email,password:a.state.register.password});case 3:t=e.sent,s=t.data,r=s.user,n=s.token,console.log(r),console.log(n),a.setState({loading:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),a.setState({errorMessage:e.t0.data.error,loading:!1});case 14:case"end":return e.stop()}},e,this,[[0,10]])})),a.submitSignUp=function(e){""===a.state.register.email||""===a.state.register.password?(e.target[0].classList.add("invalid-value"),e.target[1].classList.add("invalid-value"),e.target[2].classList.add("invalid-value"),e.target[3].classList.add("invalid-value"),a.setState({loading:!1,errorMessage:"Todos os campos s\xe3o obrigat\xf3rios"})):a.state.register.password!==a.state.register.confirmPassword?(e.target[2].classList.remove("valid-value"),e.target[3].classList.remove("valid-value"),e.target[2].classList.add("invalid-value"),e.target[3].classList.add("invalid-value"),a.setState({loading:!1,errorMessage:"The passwords do not match"})):(e.target[0].classList.add("valid-value"),e.target[1].classList.add("valid-value"),e.target[2].classList.add("valid-value"),e.target[3].classList.add("valid-value"),a.setState({errorMessage:"",loading:!0}),a.do_signUp(e))},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Movies")),r.a.createElement("main",null,r.a.createElement("section",{className:"sec-login ".concat(0===this.state.currentForm?"current":"")},r.a.createElement("h2",{onClick:this.chageForm.bind(this,0)},"Login"),r.a.createElement("form",{className:"login",onSubmit:function(t){t.preventDefault(),e.submitLogin(t)}},r.a.createElement(b,{type:"text",name:"E-mail",icon:r.a.createElement(y.FaEnvelope,null),value:this.state.login.email,field:"email",onChange:function(t){e.setState({login:Object(v.a)({},e.state.login,{email:t.target.value})})}}),r.a.createElement(b,{type:"password",name:"Password",icon:r.a.createElement(y.FaKey,null),value:this.state.login.password,field:"password",onChange:function(t){e.setState({login:Object(v.a)({},e.state.login,{password:t.target.value})})}}),r.a.createElement("a",{href:"/",onClick:function(t){t.preventDefault(),e.setState({modalForgotPassword:!0})}},"Forgot password?"),this.state.errorMessage&&r.a.createElement("label",{className:"errorMessage"},this.state.errorMessage),r.a.createElement(O,null),r.a.createElement(E,{type:"submit",text:"Login"}))),r.a.createElement("section",{className:"sec-sign-up ".concat(1===this.state.currentForm?"current":"")},r.a.createElement("h2",{onClick:this.chageForm.bind(this,1)},"Sign Up"),r.a.createElement("form",{className:"sign-up",onSubmit:function(t){t.preventDefault(),e.setState({loading:!0}),e.submitSignUp(t)}},r.a.createElement(b,{type:"text",name:"Nome Completo",icon:r.a.createElement(y.FaUser,null),value:this.state.register.name,field:"name",onChange:function(t){e.setState({register:Object(v.a)({},e.state.register,{name:t.target.value})})}}),r.a.createElement(b,{type:"text",name:"E-mail",icon:r.a.createElement(y.FaEnvelope,null),value:this.state.register.email,field:"email",onChange:function(t){e.setState({register:Object(v.a)({},e.state.register,{email:t.target.value})})}}),r.a.createElement(b,{type:"password",name:"Password",icon:r.a.createElement(y.FaKey,null),value:this.state.register.password,field:"password",onChange:function(t){e.setState({register:Object(v.a)({},e.state.register,{password:t.target.value})})}}),r.a.createElement(b,{type:"password",name:"Confirm Password",icon:r.a.createElement(y.FaKey,null),value:this.state.register.confirmPassword,field:"password",onChange:function(t){e.setState({register:Object(v.a)({},e.state.register,{confirmPassword:t.target.value})})}}),r.a.createElement(b,{type:"number",name:"Birth Date",icon:r.a.createElement(y.FaCalendar,null),value:this.state.register.bornDate,field:"date",onChange:function(t){e.setState({register:Object(v.a)({},e.state.register,{bornDate:t.target.value})})}}),r.a.createElement(b,{type:"number",name:"Cellphone",icon:r.a.createElement(y.FaMobile,null),value:this.state.register.phone,field:"date",onChange:function(t){e.setState({register:Object(v.a)({},e.state.register,{phone:t.target.value})})}}),this.state.errorMessage&&r.a.createElement("label",{className:"errorMessage"},this.state.errorMessage),r.a.createElement(O,null),r.a.createElement(E,{type:"submit",text:"Sign Up"}))),r.a.createElement("span",{className:"arrow-select-current"})),r.a.createElement(P,{isVisible:this.state.modalForgotPassword},r.a.createElement("h2",null,"Forgot Password"),r.a.createElement("p",null,"Type your e-mail to reset password."),r.a.createElement("form",{onSubmit:function(t){e.setState({loading:!0}),e.forgotPassword(t)}},r.a.createElement(b,{type:"text",name:"E-mail",icon:r.a.createElement(y.FaEnvelope,null),value:this.state.resetPassword.email,field:"email",onChange:function(t){e.setState({resetPassword:Object(v.a)({},e.state.resetPassword,{email:t.target.value})})}}),this.state.errorModal&&r.a.createElement("label",{className:"errorMessage"},this.state.errorModal),r.a.createElement(E,{type:"submit",text:"OK"}))),r.a.createElement(P,{isVisible:this.state.modalResetPassword},r.a.createElement("h2",null,"Reset Password"),r.a.createElement("p",null,"We send a e-mail to ",this.state.resetPassword.email," ","with a token. Please, fill in the fields below to reset your password."),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setState({loading:!0}),e.resetPassword(t)}},r.a.createElement(b,{type:"password",name:"Nova senha",icon:r.a.createElement(y.FaKey,null),value:this.state.resetPassword.password,field:"password",onChange:function(t){e.setState({resetPassword:Object(v.a)({},e.state.resetPassword,{password:t.target.value})})}}),r.a.createElement(b,{type:"text",name:"Token",icon:r.a.createElement(y.FaKey,null),value:this.state.resetPassword.token,field:"token",onChange:function(t){e.setState({resetPassword:Object(v.a)({},e.state.resetPassword,{token:t.target.value})})}}),this.state.errorModal&&r.a.createElement("label",{className:"errorMessage"},this.state.errorModal),r.a.createElement(E,{type:"submit",text:"Resetar senha"}))),r.a.createElement(M,{isVisible:this.state.loading}))}}]),t}(s.Component)}],x=function(){return r.a.createElement(m.a,{basename:"/movies/build"},r.a.createElement(p.a,null,L.map(function(e){return r.a.createElement(g.a,Object.assign({key:e.path},e,{exact:!0}))})))},C=(a(127),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(x,null)}}]),t}(s.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},39:function(e,t,a){e.exports=a(129)},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){}},[[39,2,1]]]);
//# sourceMappingURL=main.a696f81d.chunk.js.map